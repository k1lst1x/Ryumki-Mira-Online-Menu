{% extends "menuapp/base.html" %}
{% load static %}
{% block title %}{{ dish.name }}{% endblock %}

{% block content %}
<div class="dish-detail">
  {% with is21=dish.category.is_21plus %}
 <article class="passport-card is-vertical {% if is21 %}requires-21{% endif %}"
          {% if is21 %}data-requires-age="21"{% endif %}
           style="--passport:url('{% if dish.passport_bg %}{{ dish.passport_bg.url }}{% else %}{% static 'img/passport-page.png' %}{% endif %}')">

    <!-- СВЕРХУ: БОЛЬШОЕ ФОТО -->
    <div class="pc-photo requires-21-visual">
      {% if dish.image %}
        <img src="{{ dish.image.url }}" alt="{{ dish.name }}">
      {% else %}
        <img src="{% static 'img/placeholder-dish.jpg' %}" alt="{{ dish.name }}">
      {% endif %}
    </div>

    <!-- СНИЗУ: ТЕКСТ -->
    <div class="pc-info">
      <h1 class="pc-title">{{ dish.name }}</h1>
      <p class="pc-desc">{{ dish.description|default:"Описание пока отсутствует" }}</p>
      <div class="pc-meta">
        <span class="pc-price"><span class="sum">{{ dish.base_price }}</span> <span class="cur">₸</span></span>
        {% if is21 %}<span class="pc-badge">21+</span>{% endif %}
      </div>

      <div class="detail-actions" style="margin-top:12px;display:flex;gap:10px;flex-wrap:wrap">
        <a href="{% url 'home' %}" class="btn btn-primary">← Меню</a>
        {# <a href="{% url 'add_to_order' dish.id %}" class="btn btn-muted">Добавить в корзину</a> #}
      </div>
    </div>
  </article>
  {% endwith %}
</div>
{% endblock %}
